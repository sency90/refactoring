<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
	<head>
        <meta charset="utf-8"/>
	    <title>customer_test.cpp</title>
	    <link href="../../third-party/google-code-prettify/prettify-CppCoverage.css" type="text/css" rel="stylesheet" />
	    <script type="text/javascript" src="../../third-party/google-code-prettify/prettify.js"></script>
	</head>
    <body onload="prettyPrint()">
        <h4></h4>
        <pre class="prettyprint lang-cpp linenums">
#include "gmock/gmock.h"
#include "customer.cpp"

#if 0
TEST(CustomerTest, SampleTest) {
	Customer customer{string{ "Bob" }};

	customer.addRental(Rental{Movie{ string{ "Jaws" }, Movie::REGULAR }, 2});
	customer.addRental(Rental{Movie{ string{ "Golden Eye" }, Movie::REGULAR }, 3});
	customer.addRental(Rental{Movie{ string{ "Short New" }, Movie::NEW_RELEASE }, 1});
	customer.addRental(Rental{Movie{ string{ "Long New" }, Movie::NEW_RELEASE }, 2});
	customer.addRental(Rental{Movie{ string{ "Bambi" }, Movie::CHILDREN }, 3});
	customer.addRental(Rental{Movie{ string{ "Toy Story" }, Movie::CHILDREN }, 4});

	string expected = "" +
		string{"Rental Record for Bob\n"} +
		string{"\tJaws\t2.0\n"} +
		string{"\tGolden Eye\t3.5\n"} +
		string{"\tShort New\t3.0\n"} +
		string{"\tLong New\t6.0\n"} +
		string{"\tBambi\t1.5\n"} +
		string{"\tToy Story\t3.0\n"} +
		string{"Amount owed is 19.0\n"} +
		string{"You earned 7 frequent renter points"};

	EXPECT_EQ(expected, customer.statement());
}
#endif

namespace {
<span style = "background-color:#dfd">	const string DUMMY_CUSTOMER_NAME = "NAME_NOT_IMPORTANT";
	const string DUMMY_MOVIE_NAME = "TITLE_NOT_IMPORTANT";</span>
};

//Golden Master Test 1. Movie¸¦ RentalÇÏÁö ¾ÊÀº °æ¿ì Test
<span style = "background-color:#dfd">TEST(CustomerTest, StatementForNoRental) {</span>
	//arrange
<span style = "background-color:#dfd">	Customer customer{string{DUMMY_CUSTOMER_NAME}};</span>

	//act
<span style = "background-color:#dfd">	string statement = customer.statement();</span>

	//assert
<span style = "background-color:#dfd">	EXPECT_EQ(statement, ""</span>
		+ string{"Rental Record for NAME_NOT_IMPORTANT\n"}
		+ string{"Amount owed is 0.0\n"}
		+ string{"You earned 0 frequent renter points"}
	);
<span style = "background-color:#dfd">}</span>

//Golden Master Test2. Amount °è»ê ·ÎÁ÷ Test - ifÁ¶°Ç ºÐ±â °æ°è°ª Test
<span style = "background-color:#dfd">TEST(CustomerTest, StatementForRegularMovieRentalForLessThan3Days) {
	Customer customer{string{DUMMY_CUSTOMER_NAME}};
	Movie movie{string{DUMMY_MOVIE_NAME}, Movie::REGULAR};
	int daysRented = 2;
	Rental rental{movie, daysRented};
	customer.addRental(rental);</span>

<span style = "background-color:#dfd">	string statement = customer.statement();</span>

<span style = "background-color:#dfd">	EXPECT_EQ(statement, ""</span>
		+string{"Rental Record for NAME_NOT_IMPORTANT\n"}
		+string{"\tTITLE_NOT_IMPORTANT\t2.0\n"}
		+string{"Amount owed is 2.0\n"}
		+string{"You earned 1 frequent renter points"}
	);
<span style = "background-color:#dfd">}</span></pre>
        <hr />
        <table width="100%">
            <thead>
                <tr>
                    <th align="center">
                        <small>Generated by</small>
                        <a href="https://github.com/OpenCppCoverage/OpenCppCoverage/releases">
                            <strong>OpenCppCoverage (Version: 0.9.9.0)</strong>
                        </a>
                    </th>
                </tr>
            </thead>
        </table>
    </body>
</html>